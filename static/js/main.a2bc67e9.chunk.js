(this["webpackJsonpmango-ui-ts"]=this["webpackJsonpmango-ui-ts"]||[]).push([[0],{45:function(e,t,s){},46:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},68:function(e,t,s){},69:function(e,t,s){},71:function(e,t,s){},72:function(e,t,s){},73:function(e,t,s){},74:function(e,t,s){},84:function(e,t,s){"use strict";s.r(t);var a=s(0),r=s.n(a),n=s(18),i=s.n(n),o=(s(45),s(22)),c=s(2),u=s(14),l=s(11),p=(s(46),s(1)),h=function(e){var t=e.title,s=e.leftItems,a=e.rightItems;return Object(p.jsxs)("div",{className:"toolbar",children:[Object(p.jsx)("div",{className:"left-items",children:s}),Object(p.jsx)("h1",{className:"toolbar-title",children:t}),Object(p.jsx)("div",{className:"right-items",children:a})]})},m=(s(48),function(e){var t=e.icon;return Object(p.jsx)("i",{className:"toolbar-button ".concat(t)})}),b=(s(49),function(){return Object(p.jsx)("div",{className:"conversation-search",children:Object(p.jsx)("input",{type:"search",className:"conversation-search-input",placeholder:"Search Messages"})})}),d=s(20),j=s.n(d),f=(s(68),s(38)),g=(s(69),function(e){Object(a.useEffect)((function(){Object(f.a)(".conversation-snippet",20)}));var t=e.data,s=t.photo,r=t.name,n=t.text;return Object(p.jsxs)("div",{className:"conversation-list-item",children:[Object(p.jsx)("img",{className:"conversation-photo",src:s,alt:"conversation"}),Object(p.jsxs)("div",{className:"conversation-info",children:[Object(p.jsx)("h1",{className:"conversation-title",children:r}),Object(p.jsx)("p",{className:"conversation-snippet",children:n})]})]})}),v=function(e){var t=Object(a.useState)([]),s=Object(l.a)(t,2),r=s[0],n=s[1];Object(a.useEffect)((function(){i()}));var i=function(){j.a.get("https://randomuser.me/api/?results=20").then((function(e){var t=e.data.results.map((function(e){return{photo:e.picture.large,name:"".concat(e.name.first," ").concat(e.name.last),text:"Hello world! This is a long message that needs to be truncated."}}));n([].concat(Object(u.a)(r),Object(u.a)(t)))}))};return Object(p.jsxs)("div",{className:"conversation-list",children:[Object(p.jsx)(h,{title:"Messenger",leftItems:[Object(p.jsx)(m,{icon:"ion-ios-cog"},"cog")],rightItems:[Object(p.jsx)(m,{icon:"ion-ios-add-circle-outline"},"add")]}),Object(p.jsx)(b,{}),r.map((function(e){return Object(p.jsx)(g,{data:e},e.name)}))]})},O=s(13),x=s.n(O),w=(s(71),function(e){var t=e.data,s=e.isMine,a=e.startsSequence,r=e.endsSequence,n=e.showTimestamp,i=x()(t.timestamp).format("LLLL");return Object(p.jsxs)("div",{className:["message","".concat(s?"mine":""),"".concat(a?"start":""),"".concat(r?"end":"")].join(" "),children:[n&&Object(p.jsx)("div",{className:"timestamp",children:i}),Object(p.jsx)("div",{className:"bubble-container",children:Object(p.jsx)("div",{className:"bubble",title:i,children:t.message})})]})}),k=(s(72),s(73),function(e){return Object(p.jsxs)("div",{className:"compose",children:[Object(p.jsx)("input",{type:"text",className:"compose-input",placeholder:"Type a message, @name"}),e.rightItems]})}),y=function(e){var t=Object(a.useState)([]),s=Object(l.a)(t,2),r=s[0],n=s[1];Object(a.useEffect)((function(){i()}));var i=function(){var e=[{id:1,author:"apple",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:2,author:"orange",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()},{id:3,author:"orange",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:4,author:"apple",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()},{id:5,author:"apple",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:6,author:"apple",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()},{id:7,author:"orange",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:8,author:"orange",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()},{id:9,author:"apple",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:10,author:"orange",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()}];n([].concat(Object(u.a)(r),e))};return Object(p.jsxs)("div",{className:"message-list",children:[Object(p.jsx)(h,{title:"Conversation Title",rightItems:[Object(p.jsx)(m,{icon:"ion-ios-information-circle-outline"},"info"),Object(p.jsx)(m,{icon:"ion-ios-videocam"},"video"),Object(p.jsx)(m,{icon:"ion-ios-call"},"phone")]}),Object(p.jsx)("div",{className:"message-list-container",children:function(){for(var e=0,t=r.length,s=[];e<t;){var a=r[e-1],n=r[e],i=r[e+1],o="apple"===n.author,c=x()(n.timestamp),u=!0,l=!0,h=!0;if(a){var m=x()(a.timestamp),b=x.a.duration(c.diff(m));a.author===n.author&&b.as("hours")<1&&(u=!1),b.as("hours")<1&&(h=!1)}if(i){var d=x()(i.timestamp),j=x.a.duration(d.diff(c));i.author===n.author&&j.as("hours")<1&&(l=!1)}s.push(Object(p.jsx)(w,{isMine:o,startsSequence:u,endsSequence:l,showTimestamp:h,data:n},e)),e+=1}return s}()}),Object(p.jsx)(k,{rightItems:[Object(p.jsx)(m,{icon:"ion-ios-camera"},"photo"),Object(p.jsx)(m,{icon:"ion-ios-image"},"image"),Object(p.jsx)(m,{icon:"ion-ios-mic"},"audio"),Object(p.jsx)(m,{icon:"ion-ios-card"},"money"),Object(p.jsx)(m,{icon:"ion-logo-game-controller-b"},"games"),Object(p.jsx)(m,{icon:"ion-ios-happy"},"emoji")]})]})},N=(s(74),function(e){return Object(p.jsxs)("div",{className:"messenger",children:[Object(p.jsx)("div",{className:"scrollable sidebar",children:Object(p.jsx)(v,{})}),Object(p.jsx)("div",{className:"scrollable content",children:Object(p.jsx)(y,{})})]})}),T=s(40),I=s(5),L=s.n(I),C=s(12),E=s(25),D=s(9),M=s(21),S=s(26),A=(s(76),s(3)),P=function e(){Object(D.a)(this,e)};P.apiDomain="https://mango-messenger-app.herokuapp.com";var R=function e(){Object(D.a)(this,e)};R.postRegister="/api/auth/register",R.postLogin="/api/auth/login",R.postRefreshToken="/api/auth/refresh-token",R.getVerifyPhone="/api/auth/verify-phone";var W=function e(){Object(D.a)(this,e)};W.getChats="/api/chats",W.postGroup="/api/chats/group",W.postDirectChat="/api/chats/direct-chat",W.postJoinGroup="/api/chats/group/join/{chatId}";var q=function e(){Object(D.a)(this,e)};q.getChatMessages="/api/messages/{chatId}",q.postMessage="/api/messages",q.putMessage="/api/messages",q.deleteMessage="/api/messages/{messageId}";var H,_,J,z=function(){function e(){Object(D.a)(this,e),this.headers={"Content-Type":"application/json"},this.apiConnector=void 0,this.apiConnector=j.a.create({headers:this.headers,baseURL:P.apiDomain})}return Object(M.a)(e,[{key:"register",value:function(){var e=Object(C.a)(L.a.mark((function e(t){var s,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.apiConnector.post(R.postRegister,{phoneNumber:t.phoneNumber,email:t.email,displayName:t.displayName,password:t.password,verificationMethod:t.verificationMethod,termsAccepted:t.termsAccepted},{headers:this.headers});case 3:return s=e.sent,e.abrupt("return",Promise.resolve(s.data));case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=21;break}a="",e.t1=e.t0.response.status,e.next=401===e.t1?14:403===e.t1?16:18;break;case 14:return a="Wrong login or password",e.abrupt("break",20);case 16:return a="Access denied",e.abrupt("break",20);case 18:return a=e.t0.response.status,e.abrupt("break",20);case 20:console.log("One of the Error messages from Register Request: ",a);case 21:return e.abrupt("return",Promise.reject(e.t0));case 22:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(C.a)(L.a.mark((function e(t){var s,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.apiConnector.post(R.postLogin,{email:t.email,password:t.password},{headers:this.headers});case 3:return s=e.sent,e.abrupt("return",Promise.resolve(s.data));case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=21;break}a="",e.t1=e.t0.response.status,e.next=401===e.t1?14:403===e.t1?16:18;break;case 14:return a="Wrong login or password",e.abrupt("break",20);case 16:return a="Access denied",e.abrupt("break",20);case 18:return a=e.t0.response.status,e.abrupt("break",20);case 20:console.log("One of the Error messages from Register Request: ",a);case 21:return e.abrupt("return",Promise.reject(e.t0));case 22:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyEmail",value:function(){var e=Object(C.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyPhone",value:function(){var e=Object(C.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshToken",value:function(){var e=Object(C.a)(L.a.mark((function e(t){var s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.apiConnector.post(R.postRefreshToken,{refreshTokenId:t.refreshTokenId},{headers:this.headers});case 3:return e.sent,e.abrupt("return",Promise.resolve());case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=21;break}s="",e.t1=e.t0.response.status,e.next=401===e.t1?14:403===e.t1?16:18;break;case 14:return s="Wrong login or password",e.abrupt("break",20);case 16:return s="Access denied",e.abrupt("break",20);case 18:return s=e.t0.response.status,e.abrupt("break",20);case 20:console.log("One of the Error messages from Register Request: ",s);case 21:return e.abrupt("return",Promise.reject(e.t0));case 22:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(C.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logoutAll",value:function(){var e=Object(C.a)(L.a.mark((function e(t){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),G=(H=function(){function e(){Object(D.a)(this,e),this.registrationApi=new z,Object(E.a)(this,"_login",_,this),Object(E.a)(this,"_isLogged",J,this),Object(A.d)(this)}return Object(M.a)(e,[{key:"registration",value:function(){var e=Object(C.a)(L.a.mark((function e(t){var s;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.registrationApi.register(t);case 3:return s=e.sent,e.abrupt("return",s);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),_=Object(S.a)(H.prototype,"_login",[A.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=Object(S.a)(H.prototype,"_isLogged",[A.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),H),B=function e(t,s,a,r,n,i){Object(D.a)(this,e),this.phoneNumber=void 0,this.email=void 0,this.displayName=void 0,this.password=void 0,this.verificationMethod=void 0,this.termsAccepted=void 0,this.phoneNumber=t,this.email=s,this.displayName=a,this.password=r,this.verificationMethod=n,this.termsAccepted=i},U=Object(T.a)((function(){var e=new G,t=r.a.useState(""),s=Object(l.a)(t,2),a=s[0],n=s[1],i=r.a.useState(""),o=Object(l.a)(i,2),c=o[0],h=o[1],m=r.a.useState(""),b=Object(l.a)(m,2),d=b[0],j=b[1],f=r.a.useState(""),g=Object(l.a)(f,2),v=g[0],O=g[1],x=r.a.useState([]),w=Object(l.a)(x,2),k=w[0],y=w[1],N=r.a.useState(!1),T=Object(l.a)(N,2),I=T[0],L=T[1];return Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),y([].concat(Object(u.a)(k),[a,d,v,c])),e.registration(new B(a,c,d,v,1,!0))},children:[Object(p.jsxs)("label",{children:["Phone Number:",Object(p.jsx)("input",{type:"text",value:a,onChange:function(e){return n(e.target.value)},placeholder:"Enter your phone number"})]}),Object(p.jsxs)("label",{children:["Email:",Object(p.jsx)("input",{type:"text",value:c,onChange:function(e){return h(e.target.value)},placeholder:"Enter your E-MAIL"})]}),Object(p.jsxs)("label",{children:["Name:",Object(p.jsx)("input",{type:"text",value:d,onChange:function(e){return j(e.target.value)},placeholder:"Enter your name"})]}),Object(p.jsxs)("label",{children:["Password:",Object(p.jsx)("input",{type:"text",value:v,onChange:function(e){return O(e.target.value)},placeholder:"Enter your E-MAIL"})]}),Object(p.jsx)("label",{children:"check me!"}),Object(p.jsx)("input",{type:"submit",value:"submit"}),Object(p.jsx)("input",{type:"checkbox",id:"topping",name:"topping",value:"Paneer",checked:I,onChange:function(){return L(!0)}})]})}));function V(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(o.a,{children:Object(p.jsxs)(c.c,{children:[Object(p.jsx)(c.a,{exact:!0,path:"/",component:N}),Object(p.jsx)(c.a,{exact:!0,path:"/registration",component:U})]})})})}i.a.render(Object(p.jsx)(o.a,{children:Object(p.jsx)(V,{})}),document.getElementById("root"))}},[[84,1,2]]]);
//# sourceMappingURL=main.a2bc67e9.chunk.js.map