(this["webpackJsonpmango-ui-ts"]=this["webpackJsonpmango-ui-ts"]||[]).push([[0],{53:function(e,t,s){},54:function(e,t,s){},56:function(e,t,s){},57:function(e,t,s){},75:function(e,t,s){},76:function(e,t,s){},78:function(e,t,s){},79:function(e,t,s){},80:function(e,t,s){},81:function(e,t,s){},92:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),r=s(23),i=s.n(r),o=(s(53),s(27)),c=s(3),u=s(22),l=s(11),p=(s(54),s(1)),b=function(e){var t=e.title,s=e.leftItems,n=e.rightItems;return Object(p.jsxs)("div",{className:"toolbar",children:[Object(p.jsx)("div",{className:"left-items",children:s}),Object(p.jsx)("h1",{className:"toolbar-title",children:t}),Object(p.jsx)("div",{className:"right-items",children:n})]})},h=(s(56),function(e){var t=e.icon;return Object(p.jsx)("i",{className:"toolbar-button ".concat(t)})}),d=(s(57),function(){return Object(p.jsx)("div",{className:"conversation-search",children:Object(p.jsx)("input",{type:"search",className:"conversation-search-input",placeholder:"Search Messages"})})}),m=s(25),j=s.n(m),g=(s(75),s(44)),f=(s(76),function(e){Object(n.useEffect)((function(){Object(g.a)(".conversation-snippet",20)}));var t=e.data,s=t.photo,a=t.name,r=t.text;return Object(p.jsxs)("div",{className:"conversation-list-item",children:[Object(p.jsx)("img",{className:"conversation-photo",src:s,alt:"conversation"}),Object(p.jsxs)("div",{className:"conversation-info",children:[Object(p.jsx)("h1",{className:"conversation-title",children:a}),Object(p.jsx)("p",{className:"conversation-snippet",children:r})]})]})}),O=function(e){var t=Object(n.useState)([]),s=Object(l.a)(t,2),a=s[0],r=s[1];Object(n.useEffect)((function(){i()}));var i=function(){j.a.get("https://randomuser.me/api/?results=20").then((function(e){var t=e.data.results.map((function(e){return{photo:e.picture.large,name:"".concat(e.name.first," ").concat(e.name.last),text:"Hello world! This is a long message that needs to be truncated."}}));r([].concat(Object(u.a)(a),Object(u.a)(t)))}))};return Object(p.jsxs)("div",{className:"conversation-list",children:[Object(p.jsx)(b,{title:"Messenger",leftItems:[Object(p.jsx)(h,{icon:"ion-ios-cog"},"cog")],rightItems:[Object(p.jsx)(h,{icon:"ion-ios-add-circle-outline"},"add")]}),Object(p.jsx)(d,{}),a.map((function(e){return Object(p.jsx)(f,{data:e},e.name)}))]})},x=s(15),v=s.n(x),w=(s(78),function(e){var t=e.data,s=e.isMine,n=e.startsSequence,a=e.endsSequence,r=e.showTimestamp,i=v()(t.timestamp).format("LLLL");return Object(p.jsxs)("div",{className:["message","".concat(s?"mine":""),"".concat(n?"start":""),"".concat(a?"end":"")].join(" "),children:[r&&Object(p.jsx)("div",{className:"timestamp",children:i}),Object(p.jsx)("div",{className:"bubble-container",children:Object(p.jsx)("div",{className:"bubble",title:i,children:t.message})})]})}),y=(s(79),s(80),function(e){return Object(p.jsxs)("div",{className:"compose",children:[Object(p.jsx)("input",{type:"text",className:"compose-input",placeholder:"Type a message, @name"}),e.rightItems]})}),k=function(e){var t=Object(n.useState)([]),s=Object(l.a)(t,2),a=s[0],r=s[1];Object(n.useEffect)((function(){i()}));var i=function(){var e=[{id:1,author:"apple",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:2,author:"orange",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()},{id:3,author:"orange",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:4,author:"apple",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()},{id:5,author:"apple",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:6,author:"apple",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()},{id:7,author:"orange",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:8,author:"orange",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()},{id:9,author:"apple",message:"Hello world! This is a long message that will hopefully get wrapped by our message bubble component! We will see how well it works.",timestamp:(new Date).getTime()},{id:10,author:"orange",message:"It looks like it wraps exactly as it is supposed to. Lets see what a reply looks like!",timestamp:(new Date).getTime()}];r([].concat(Object(u.a)(a),e))};return Object(p.jsxs)("div",{className:"message-list",children:[Object(p.jsx)(b,{title:"Conversation Title",rightItems:[Object(p.jsx)(h,{icon:"ion-ios-information-circle-outline"},"info"),Object(p.jsx)(h,{icon:"ion-ios-videocam"},"video"),Object(p.jsx)(h,{icon:"ion-ios-call"},"phone")]}),Object(p.jsx)("div",{className:"message-list-container",children:function(){for(var e=0,t=a.length,s=[];e<t;){var n=a[e-1],r=a[e],i=a[e+1],o="apple"===r.author,c=v()(r.timestamp),u=!0,l=!0,b=!0;if(n){var h=v()(n.timestamp),d=v.a.duration(c.diff(h));n.author===r.author&&d.as("hours")<1&&(u=!1),d.as("hours")<1&&(b=!1)}if(i){var m=v()(i.timestamp),j=v.a.duration(m.diff(c));i.author===r.author&&j.as("hours")<1&&(l=!1)}s.push(Object(p.jsx)(w,{isMine:o,startsSequence:u,endsSequence:l,showTimestamp:b,data:r},e)),e+=1}return s}()}),Object(p.jsx)(y,{rightItems:[Object(p.jsx)(h,{icon:"ion-ios-camera"},"photo"),Object(p.jsx)(h,{icon:"ion-ios-image"},"image"),Object(p.jsx)(h,{icon:"ion-ios-mic"},"audio"),Object(p.jsx)(h,{icon:"ion-ios-card"},"money"),Object(p.jsx)(h,{icon:"ion-logo-game-controller-b"},"games"),Object(p.jsx)(h,{icon:"ion-ios-happy"},"emoji")]})]})},N=(s(81),function(e){return Object(p.jsxs)("div",{className:"messenger",children:[Object(p.jsx)("div",{className:"scrollable sidebar",children:Object(p.jsx)(O,{})}),Object(p.jsx)("div",{className:"scrollable content",children:Object(p.jsx)(k,{})})]})}),T=s(17),I=s(48),S=s(5),M=s.n(S),C=s(12),E=s(13),L=s(9),D=s(26),z=s(14),A=(s(83),s(2)),P=function e(){Object(L.a)(this,e)};P.apiDomain="https://mango-messenger-app.herokuapp.com";var _=function e(){Object(L.a)(this,e)};_.postRegister="/api/auth/register",_.postLogin="/api/auth/login",_.postRefreshToken="/api/auth/refresh-token",_.getVerifyPhone="/api/auth/verify-phone";var R=function e(){Object(L.a)(this,e)};R.getChats="/api/chats",R.postGroup="/api/chats/group",R.postDirectChat="/api/chats/direct-chat",R.postJoinGroup="/api/chats/group/join/{chatId}";var W=function e(){Object(L.a)(this,e)};W.getChatMessages="/api/messages/{chatId}",W.postMessage="/api/messages",W.putMessage="/api/messages",W.deleteMessage="/api/messages/{messageId}";var q,H,B,U,J,G,V,F,K,Q,X,Y,Z,$,ee,te=function(){function e(){Object(L.a)(this,e),this.headers={"Content-Type":"application/json"},this.apiConnector=void 0,this.apiConnector=j.a.create({headers:this.headers,baseURL:P.apiDomain})}return Object(D.a)(e,[{key:"register",value:function(){var e=Object(C.a)(M.a.mark((function e(t){var s,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.apiConnector.post(_.postRegister,{phoneNumber:t.phoneNumber,email:t.email,displayName:t.displayName,password:t.password,verificationMethod:t.verificationMethod,termsAccepted:t.termsAccepted},{headers:this.headers});case 3:return s=e.sent,e.abrupt("return",Promise.resolve(s.data));case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=21;break}n="",e.t1=e.t0.response.status,e.next=401===e.t1?14:403===e.t1?16:18;break;case 14:return n="Wrong login or password",e.abrupt("break",20);case 16:return n="Access denied",e.abrupt("break",20);case 18:return n=e.t0.response.status,e.abrupt("break",20);case 20:console.log("One of the Error messages from Register Request: ",n);case 21:return e.abrupt("return",Promise.reject(e.t0));case 22:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(C.a)(M.a.mark((function e(t){var s,n;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.apiConnector.post(_.postLogin,{email:t.email,password:t.password},{headers:this.headers});case 3:return s=e.sent,e.abrupt("return",Promise.resolve(s.data));case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=21;break}n="",e.t1=e.t0.response.status,e.next=401===e.t1?14:403===e.t1?16:18;break;case 14:return n="Wrong login or password",e.abrupt("break",20);case 16:return n="Access denied",e.abrupt("break",20);case 18:return n=e.t0.response.status,e.abrupt("break",20);case 20:console.log("One of the Error messages from Register Request: ",n);case 21:return e.abrupt("return",Promise.reject(e.t0));case 22:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyEmail",value:function(){var e=Object(C.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"verifyPhone",value:function(){var e=Object(C.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"refreshToken",value:function(){var e=Object(C.a)(M.a.mark((function e(t){var s;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.apiConnector.post(_.postRefreshToken,{refreshTokenId:t.refreshTokenId},{headers:this.headers});case 3:return e.sent,e.abrupt("return",Promise.resolve());case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response){e.next=21;break}s="",e.t1=e.t0.response.status,e.next=401===e.t1?14:403===e.t1?16:18;break;case 14:return s="Wrong login or password",e.abrupt("break",20);case 16:return s="Access denied",e.abrupt("break",20);case 18:return s=e.t0.response.status,e.abrupt("break",20);case 20:console.log("One of the Error messages from Register Request: ",s);case 21:return e.abrupt("return",Promise.reject(e.t0));case 22:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(C.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"logoutAll",value:function(){var e=Object(C.a)(M.a.mark((function e(t){return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),se=(q=function(){function e(){Object(L.a)(this,e),this.registrationApi=new te,Object(E.a)(this,"_message",H,this),Object(E.a)(this,"_success",B,this),Object(E.a)(this,"_userId",U,this),Object(E.a)(this,"_login",J,this),Object(E.a)(this,"_isLogged",G,this),Object(E.a)(this,"setMessage",V,this),Object(E.a)(this,"setSuccess",F,this),Object(E.a)(this,"setUserId",K,this),Object(A.e)(this)}return Object(D.a)(e,[{key:"registration",value:function(){var e=Object(C.a)(M.a.mark((function e(t){var s,n,a,r;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.registrationApi.register(t);case 3:return s=e.sent,n=s.message,a=s.success,r=s.userId,this.setMessage(n),this.setSuccess(a),this.setUserId(r),e.abrupt("return",Promise.resolve());case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),H=Object(z.a)(q.prototype,"_message",[A.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=Object(z.a)(q.prototype,"_success",[A.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),U=Object(z.a)(q.prototype,"_userId",[A.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=Object(z.a)(q.prototype,"_login",[A.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=Object(z.a)(q.prototype,"_isLogged",[A.g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),V=Object(z.a)(q.prototype,"setMessage",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e._message=t}}}),F=Object(z.a)(q.prototype,"setSuccess",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e._success=t}}}),K=Object(z.a)(q.prototype,"setUserId",[A.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e._userId=t}}}),q),ne=s(18),ae=function e(t,s,n,a,r,i){Object(L.a)(this,e),this.phoneNumber=void 0,this.email=void 0,this.displayName=void 0,this.password=void 0,this.verificationMethod=void 0,this.termsAccepted=void 0,this.phoneNumber=t,this.email=s,this.displayName=n,this.password=a,this.verificationMethod=r,this.termsAccepted=i},re=Object(I.a)((function(){var e=new se,t=a.a.useState(""),s=Object(l.a)(t,2),n=s[0],r=s[1],i=a.a.useState(""),o=Object(l.a)(i,2),c=o[0],u=o[1],b=a.a.useState(""),h=Object(l.a)(b,2),d=h[0],m=h[1],j=a.a.useState(""),g=Object(l.a)(j,2),f=g[0],O=g[1],x=a.a.useState(!0),v=Object(l.a)(x,2),w=v[0],y=v[1],k=a.a.useState(1),N=Object(l.a)(k,2),T=N[0],I=N[1];return Object(p.jsx)(ie,{onSubmit:function(t){t.preventDefault(),y(!0),e.registration(new ae(n,c,d,f,T,w))},children:Object(p.jsxs)(oe,{children:[Object(p.jsx)(ce,{children:Object(p.jsxs)("label",{children:["Phone Number:",Object(p.jsx)(ue,{type:"text",value:n,onChange:function(e){return r(e.target.value)},placeholder:"Enter your phone number"})]})}),Object(p.jsx)(ce,{children:Object(p.jsxs)("label",{children:["Email:",Object(p.jsx)(ue,{type:"e-mail",value:c,onChange:function(e){return u(e.target.value)},placeholder:"Enter your E-MAIL"})]})}),Object(p.jsx)(ce,{children:Object(p.jsxs)("label",{children:["Name:",Object(p.jsx)(ue,{type:"text",value:d,onChange:function(e){return m(e.target.value)},placeholder:"Enter your name"})]})}),Object(p.jsx)(ce,{children:Object(p.jsxs)("label",{children:["Password:",Object(p.jsx)(ue,{type:"password",value:f,onChange:function(e){return O(e.target.value)},placeholder:"Enter your password"})]})}),Object(p.jsxs)("label",{style:{margin:"0 0 15px 0"},children:["Authorization method:",Object(p.jsxs)(pe,{onChange:function(e){"phone"===e.target.value?I(1):"email"===e.target.value&&I(2)},children:[Object(p.jsx)("option",{value:"phone",children:"Phone number"}),Object(p.jsx)("option",{value:"email",children:"E-Mail"})]})]}),Object(p.jsxs)("label",{children:["By clicking submit you are agreeing to the Terms and Conditions.",Object(p.jsx)(le,{type:"submit",value:"submit"})]})]})})})),ie=Object(ne.a)("div")(Q||(Q=Object(T.a)(["\n    height: 100vh;\n    width: 100vw;\n    font-family: 'Open Sans',sans-serif;\n    color: #fff;\n    background: linear-gradient(#141e30, #243b55);    \n    display: flex;\n    justify-content: center;\n"]))),oe=Object(ne.a)("form")(X||(X=Object(T.a)(["\n    width: 400px;\n    height: fit-content;\n    padding: 40px;\n    background: rgba(0,0,0,.5);\n    box-sizing: border-box;\n    box-shadow: 0 15px 25px rgba(0,0,0,.6);\n    border-radius: 10px;\n    display: flex;\n    flex-direction: column;\n"]))),ce=Object(ne.a)("div")(Y||(Y=Object(T.a)(["\n  width: 100%;\n  padding: 10px 0;\n  font-size: 16px;\n  color: #fff;\n  margin-bottom: 30px;\n  border: none;\n  outline: none;\n  background: transparent;\n    \n"]))),ue=Object(ne.a)("input")(Z||(Z=Object(T.a)(["\n  width: 100%;\n  padding: 10px 0;\n  font-size: 16px;\n  color: #fff;\n  margin-bottom: 30px;\n  border: none;\n  border-bottom: 1px solid #fff;\n  outline: none;\n  background: transparent;\n"]))),le=Object(ne.a)("input")($||($=Object(T.a)(["\n    background: linear-gradient(#243B6B, #8951e9);\n    width: 100%;\n    height: 8.5%;\n    padding: 10px 20px;\n    color: #f1ecf2;\n    font-size: 16px;\n    text-decoration: none;\n    text-transform: uppercase;\n    overflow: hidden;\n    transition: 0.6s;\n    cursor: pointer;\n    margin-top: 40px;\n    letter-spacing: 2px;\n    border: 2px solid;\n    &:hover {\n    background: #243b55;\n    color: #fff;\n    border-radius: 5px;\n    }\n    \n"]))),pe=Object(ne.a)("select")(ee||(ee=Object(T.a)(["\n    padding: 5px;\n    width: 100%;\n    cursor: pointer;\n    border-radius: 5px;\n    background-color: #ddd;\n"])));function be(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(o.a,{children:Object(p.jsxs)(c.c,{children:[Object(p.jsx)(c.a,{exact:!0,path:"/",component:N}),Object(p.jsx)(c.a,{exact:!0,path:"/registration",component:re})]})})})}i.a.render(Object(p.jsx)(o.a,{children:Object(p.jsx)(be,{})}),document.getElementById("root"))}},[[92,1,2]]]);
//# sourceMappingURL=main.fe4e7b96.chunk.js.map